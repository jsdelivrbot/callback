"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,s,n){return s&&t(e.prototype,s),n&&t(e,n),e}}(),defaults={imgClose:"img/close.png",imgLogo:"img/logo.png",color:{first:"#f49a00",second:"#fab900",phone:"#3CB868"},mask:"+ 7 (___) ___ - __ - __",position:"bottom:20px; left:20px;",baseURL:"https://cdn.rawgit.com/BrRenat/callback/master/dist/"},iframeScript="window.addEventListener(\"load\", function(event) { \n                        document.querySelector('#phone').simpleMask(mask);\n                        sendForm();\n                      });",CallMe=function(){function t(e){_classCallCheck(this,t),this.name="br_"+Math.random().toString(36).substring(7),this.options=Object.assign({},defaults,e),this.elements={modalClassNames:{bg:"br-bg",wrap:"br-wrap",container:"br-container",content:"br-content",form:"br-form",open:"cback"},loadStyle:'<link href="'+this.options.baseURL+'css/ifame.min.css" rel="stylesheet">',loadScript:'<script src="'+this.options.baseURL+'js/iframe.js"></script>',modalBody:'<div class="br-container"><div class="br-content"><iframe class="br-iframe" name="frameForm" id="frameForm" src="" allowfullscreen></iframe></div></div>',modalClose:'<button class="br-close"><img src='+this.options.imgClose+' alt=""></button>',modalOpen:'<div class="cback-circle fn1"></div><div class="cback-circle fn2"></div><div class="cback-circle cback-circle--phone"><i class=\'phone-icon\'></i></div>',modalStyle:"#"+this.name+".cback {"+this.options.position+"} #"+this.name+" .cback-circle {color: "+this.options.color.phone+"; background: "+this.options.color.phone+";}",formStyle:".br-form__btn {background: "+this.options.color.first+"} .br-form__btn:hover {background: "+this.options.color.second+"}",modalIframe:'<div class="br-logo">\n\t\t\t\t\t\t<img src='+this.options.imgLogo+' alt="">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="br-text">Закажите обратный звонок, <br> мы перезвоним Вам в ближайшее время!</div>\n\t\t\t\t\t<div class="br-form">\n\t\t\t\t\t\t<form action="#" method="POST">\n\t\t\t\t\t\t\t<div class="br-form__group">\n\t\t\t\t\t\t\t\t<input type="text" placeholder="Ваше имя" title="Введите ваше имя" required value="" name="username" id="username" class="br-form__input">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="br-form__group">\n\t\t\t\t\t\t\t\t<input type="phone" title="Введите ваш номер" required value="" name="phone" id="phone" class="br-form__input">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<input type="submit" id="send" class="br-form__btn" value="Жду звонка">\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>'},this.init()}return _createClass(t,[{key:"init",value:function(){this.render(),this.clickHandler(),this.open()}},{key:"clickHandler",value:function(){var t=this;this.cbOpen.addEventListener("click",function(e){t.open(),e.preventDefault()}),this.cbClose.addEventListener("click",function(e){t.close(),e.preventDefault()})}},{key:"render",value:function(){this.cbStyle=document.createElement("style"),this.cbStyle.innerHTML=this.elements.modalStyle,document.head.appendChild(this.cbStyle),this.cbOpen=document.createElement("div"),this.cbOpen.classList.add(this.elements.modalClassNames.open),this.cbOpen.id=this.name,this.cbOpen.innerHTML=this.elements.modalOpen,document.body.appendChild(this.cbOpen),this.cbOverlay=document.createElement("div"),this.cbOverlay.classList.add(this.elements.modalClassNames.bg),this.cbBody=document.createElement("div"),this.cbBody.classList.add(this.elements.modalClassNames.wrap),this.cbBody.innerHTML=this.elements.modalBody,this.cbClose=document.createElement("div"),this.cbClose.innerHTML=this.elements.modalClose,this.cbBody.querySelector(".br-content").appendChild(this.cbClose),this.cbBody.querySelector("#frameForm").src="data:text/html;charset=utf-8,"+encodeURI('<link href="https://fonts.googleapis.com/css?family=PT+Sans" rel="stylesheet">'+this.elements.loadStyle+("<style>"+this.elements.formStyle+"</style>")+this.elements.loadScript+this.elements.modalIframe+('<script>var mask = "'+this.options.mask+'"; '+iframeScript+"</script>"))}},{key:"open",value:function(){this.cbBody=document.body.insertBefore(this.cbBody,document.body.firstChild),this.cbOverlay=document.body.insertBefore(this.cbOverlay,document.body.firstChild)}},{key:"close",value:function(){this.cbBody.remove(),this.cbOverlay.remove()}}]),t}();Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t,e){if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var s=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var o=Object.keys(Object(i)),r=0,c=o.length;r<c;r++){var a=o[r],l=Object.getOwnPropertyDescriptor(i,a);void 0!==l&&l.enumerable&&(s[a]=i[a])}}return s}});
//# sourceMappingURL=callback.min.js.map
